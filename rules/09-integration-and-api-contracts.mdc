---
alwaysApply: false
---
Description: フロントエンドとバックエンドの連携を確実にするためのルール。APIの仕様（契約）を明確にし、データ形式の不整合や通信エラーなどを適切に処理することを目的とします。

# 1. APIの「契約」を最初に定義する
- **考え方**: フロントエンドとバックエンドの開発を始める前に、両者でやり取りするデータの形式（リクエストとレスポンスの形）を「契約」として明確に定義します。これにより、お互いの思い込みによる手戻りを防ぎ、並行して開発を進めることができます。
- **実践方法**: TypeScriptの型定義(`type`や`interface`)を使って、APIが返すデータの構造を共有します。
    ```typescript
    // src/types/api/user.ts
    export type UserApiResponse = {
      id: string;
      fullName: string;
      email: string;
      createdAt: string; // ISO 8601形式
    };
    ```
- **AIへの指示**: 「ユーザー情報を返すAPIのレスポンス定義をTypeScriptの`type`として作成して。項目はID、氏名、メールアドレスです。」

# 2. ケース（命名規則）を統一する: `camelCase`
- **考え方**: JavaScript/TypeScriptでは`camelCase` (例: `userName`) が、データベースや他の言語では`snake_case` (例: `user_name`) が使われがちです。この違いはバグの温床になります。APIの境界で変換を行い、**フロントエンドのJavaScriptコード内では常に`camelCase`に統一**しましょう。
- **AIへの指示**: 「この`snake_case`のキーを持つJSONオブジェクトを、キーが`camelCase`のオブジェクトに変換するJavaScriptの関数を書いて。」

# 3. フロントエンドはAPIの3つの状態を必ず意識する
- **考え方**: フロントエンドからAPIを呼び出すとき、その処理は必ず以下の3つのいずれかの状態にあります。これらをUIに反映させることで、ユーザーは「今何が起きているのか」を理解でき、安心してアプリを使えます。
    1.  **ローディング中 (Loading)**: データ取得中。スピナーやスケルトンスクリーンを表示する。
    2.  **成功 (Success)**: データを正しく取得。取得したデータを表示する。
    3.  **エラー (Error)**: 通信失敗やサーバーエラー。エラーメッセージを表示する。
- **AIへの指示**: 「Reactでユーザーリストを取得するコンポーネントを書いて。ローディング中、成功、エラーの3つの状態をちゃんと管理してUIに表示するようにしてほしい。」

# 4. バックエンドは親切なエラーを返す
- **考え方**: バックエンドがただ`500 Internal Server Error`と返すだけでは、フロントエンドは何が起きたのか分からず、ユーザーに適切な案内ができません。「入力内容が不正です」「そのメールアドレスは既に使用されています」のように、フロントエンドが処理を分岐できるような、構造化されたエラーメッセージを返しましょう。
- **エラーレスポンスの例**:
    ```json
    {
      "errorCode": "EMAIL_ALREADY_EXISTS",
      "message": "指定されたメールアドレスは既に使用されています。"
    }
    ```
- **AIへの指示**: 「Expressでユーザー登録APIを作っているんだけど、メールアドレスが重複していた場合に、上で例示したような構造化されたエラーレスポンスを返すようにして。」